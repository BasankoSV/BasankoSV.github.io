const bodyElement=document.querySelector("body"),btnModal=document.querySelector(".button-see-lets"),buttonsCloseWindow=document.querySelectorAll("[data-close-window]"),modalElement=document.querySelector(".modal"),overlayElement=document.querySelector(".overlay"),popupElement=document.querySelector(".popup"),formElement=document.querySelector(".form"),errorMsgName=formElement.querySelector(".name-error"),errorMsgEmail=formElement.querySelector(".email-error"),btnSubmit=formElement.querySelector(".form__btn"),url="https://jsonplaceholder.typicode.com/posts",NAMEREGEXP=/^([a-zA-Z]{2,}\s[a-zA-Z]{1,}'?-?[a-zA-Z]{2,}\s?([a-zA-Z]{1,})?)/,EMAILREGEXP=/^[A-Z0-9._%+-]+@[A-Z0-9-]+.+.[A-Z]{2,4}$/i;let isValid=!1,nameValid=!1,emailValid=!1;function formValidation(e){const t=(e,t,o)=>{let l=e.target;t.test(l.value)?(o.style.display="none",isValid=!0):(o.style.display="block",isValid=!1),""===l.value&&(o.style.display="none")};switch(e.target.id){case"name":t(e,NAMEREGEXP,errorMsgName),nameValid=isValid;break;case"email":t(e,EMAILREGEXP,errorMsgEmail),emailValid=isValid}btnSubmit.disabled=!nameValid||!emailValid}async function sendData(e){try{const t=await fetch(url,{method:"POST",body:new FormData(e)});await t;showPopup("Your message successfully sent"),e.reset()}catch(e){showPopup(e)}}const openModal=()=>{bodyElement.style.overflow="hidden",overlayElement.classList.remove("hide"),modalElement.classList.remove("hide"),btnSubmit.disabled=!0},closeWindow=()=>{bodyElement.style.overflow="auto",overlayElement.classList.add("hide"),!modalElement.classList.contains("hide")&&modalElement.classList.add("hide"),!popupElement.classList.contains("hide")&&popupElement.classList.add("hide")},showPopup=e=>{bodyElement.style.overflow="hidden",overlayElement.classList.remove("hide"),popupElement.children[1].textContent=e,popupElement.classList.remove("hide")},formSubmit=e=>{e.preventDefault(),closeWindow(),sendData(formElement)};btnModal.addEventListener("click",openModal),overlayElement.addEventListener("click",closeWindow),formElement.addEventListener("input",formValidation),formElement.addEventListener("submit",formSubmit),buttonsCloseWindow.forEach((e=>e.addEventListener("click",closeWindow)));